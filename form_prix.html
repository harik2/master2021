<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    Libelle : <input type="text" name="" id="libelle" />
    Prix : <input type="text" name="" id="prix" />
    <button>+</button>
    <p>Nombre de produits : <span id="count">0</span></p>
    TTC :
    <div id="somme">0</div>

    <table border="1">
      <thead>
        <tr>
          <th>Libelle</th>
          <th>Prix</th>
        </tr>
      </thead>
      <tbody>
  
      </tbody>
    </table>

    <script>
      //DOM
      let libelle = document.getElementById("libelle");
      let prix = document.getElementById("prix");
      let b = document.querySelector("button");
      let count = document.querySelector("#count");
      let somme = document.querySelector("#somme");
      let tbody = document.querySelector("tbody");
      let tab = [];


      b.addEventListener("click", () => {
          let produit={libelle:libelle.value,prix:prix.value};
        //   console.log(produit)

          if(prix.value>=0){
        tab.push(produit); //[10,20]
        let tab_tr=tab.map(e=>`<tr> <td>${e.libelle}</td><td>${e.prix}</td> </tr>`); // [<tr> <td>10</td> </tr>,<tr><td>20</td> </tr>]
           let text_tr= tab_tr.join('')  ;       // <tr> <td>10</td> </tr><tr><td>20</td> </tr>
            tbody.innerHTML=text_tr;


    }else {
        console.log('erreur de prix <0')
    }

    let sum =0;
    // for(i=0;i<tab.length;i++){
    //     sum+=parseFloat(tab[i].prix);//"10"=>10
    // }
    //[10,5,2]
    
    let tab_prix=tab.map(e=>parseFloat(e.prix));
    console.log('tab prix',tab_prix);

  sum=  tab_prix.reduce((a,b)=>a+b);
    somme.innerHTML='la somme est '+sum;
    count.innerHTML=tab.length
    });
    </script>
  </body>
</html>
